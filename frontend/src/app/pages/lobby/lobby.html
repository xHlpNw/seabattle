<!-- Lobby Page -->
<div class="lobby-page">
  <header class="topbar">
    <div class="logo">⚓ BATTLESHIP</div>
    <button class="back-btn" (click)="backToHome()">← BACK</button>
  </header>

  <main class="lobby-content">
    <div class="lobby-container">
      <h1>ONLINE MULTIPLAYER</h1>
      <p>Challenge another player to a naval battle</p>

      <!-- Loading indicator -->
      <div class="lobby-setup" *ngIf="isLoading">
        <div class="waiting-indicator">
          <div class="spinner"></div>
          <p>Loading lobby...</p>
        </div>
      </div>

      <!-- Lobby content when loaded -->
      <div class="lobby-setup" *ngIf="!isLoading">
        <div class="lobby-code-section" *ngIf="isHost">
          <h3>ROOM TOKEN</h3>
          <div class="code-display">
            <span class="code">{{ roomToken }}</span>
          </div>
        </div>

        <div class="lobby-code-section" *ngIf="!isHost">
          <h3>JOINED ROOM</h3>
          <div class="code-display">
            <span class="code">{{ roomToken }}</span>
            <p class="host-info">Host: {{ hostUsername }}</p>
          </div>
        </div>

        <div class="invite-section">
          <h3>INVITE A FRIEND</h3>
          <p>Share this link with another player to join your lobby:</p>
          <div class="invite-link-container">
            <input type="text" readonly [value]="inviteLink" class="invite-input">
            <button class="copy-btn" (click)="copyInviteLink()">COPY</button>
          </div>
        </div>

        <div class="status-section">
          <div class="waiting-indicator" *ngIf="isHost && !opponentJoined">
            <div class="spinner"></div>
            <p>Waiting for opponent to join...</p>
          </div>

          <div class="waiting-indicator" *ngIf="!isHost">
            <div class="spinner"></div>
            <p>Waiting for {{ hostUsername }} to start the game...</p>
          </div>

          <div class="success-indicator" *ngIf="isHost && opponentJoined">
            <p>✅ Opponent joined! Ready to start the game.</p>
          </div>
        </div>

        <div class="actions" *ngIf="isHost && opponentJoined">
          <button class="create-game-btn" (click)="startGame()">
            START GAME
          </button>
        </div>

        <div class="error-section" *ngIf="errorMessage">
          <p class="error">{{ errorMessage }}</p>
        </div>
      </div>
    </div>
  </main>
</div>



